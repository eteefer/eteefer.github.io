<!DOCTYPE html>
<html>
<head>
  <title>Basketball</title>
  <link href="./jsforkidsgames.css" type="text/css" rel="stylesheet"/>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous">
  </script>
  <script>
  $(document).ready(function() {
    var Ball = function (x,y) {
	  this.x = x;
	  this.y = y;
	  this.toggler = 1;
	  this.draw();
	}
	
	Ball.prototype.draw = function () {
	  var ballHtml = '<img src ="./test%20ball.png" width = "100">';
	
	  this.ballElement = $(ballHtml);
	 
	  this.ballElement.css({
	    position: "absolute",
		left: this.x,
		top: this.y
	  });
	  
	  $("body").append(this.ballElement);
	 };
	 
	 Ball.prototype.moveDown = function (distance) {
	   this.y += distance;
	   
	   this.ballElement.css({
        left: this.x,
        top: this.y
      });
	 }
	 
	 Ball.prototype.moveUp = function (distance) {
	   this.y -= distance;
	   
	   this.ballElement.css({
        left: this.x,
        top: this.y
      });
	 }
	  
	var ball = [];
	ball[0] = new Ball(Math.floor(Math.random() * 1350), 200);
	
	var keyActions = {
          32: "anotherBall",
	  46: "deleteBall",
	  77: "showMathRandom"  //added for learning purposes
    };
	
	 $("body").keydown(function (event) {
          if (keyActions[event.keyCode] === "anotherBall") {
	    ball[ball.length] = new Ball(Math.floor(Math.random() * 1350), 200);
          }
	  if (keyActions[event.keyCode] === "deleteBall" && ball.length > 0) {
	    var tempIndex = Math.floor(Math.random() * ball.length);
		ball[tempIndex].ballElement.css('display', 'none');
	    ball.splice(tempIndex, 1);
	  }
          if (keyActions[event.keyCode] === "showMathRandom") {
	    alert("ball[ball.length] = new Ball(Math.floor(Math.random() * 1350), 200);");
	  }
	});
	
	var toggler = 1;
	ballsBouncing = setInterval(function () {
	  for (var i = 0; i < ball.length; i++) {
	     if (ball[i].y < 500 && ball[i].toggler === 1) {
		   ball[i].moveDown(5);
		 }
		 
		 else if (ball[i].y >= 500 && ball[i].toggler === 1) {
		   ball[i].toggler = -1;
		   ball[i].moveUp(5);
		 }
		 
		 else if (ball[i].y <= 500 && ball[i].y >= 200 && ball[i].toggler === -1) {
		   ball[i].moveUp(5);
		 }
		 else {
		   ball[i].toggler = 1;
		   ball[i].moveDown(5);
		 }
		}    
	   
	  
	  }, 20);
	  
	  
	 
	 }
	);
	</script>
	</head>
	<body>
	<a href="./treasure.html"><button class="button">Find the Buried Treasure</button></a>
        <a href="./teslasRacing.html"><button class="button">Teslas Racing</button></a>
        <a href="./boxInvaders.html"><button class="button">Box Invaders</button></a>
        <a href="./rainingBasketballs"><button class="button">Raining Basketballs</button></a>
        <a href="https://www.purposefulprogramming.org" style="float: right; margin:25px"><em>www.purposefulprogramming.org</em></a>
	
	<br style="clear:both" />
        <div style="text-align: center">
        <h2 id="heading">It's Raining Basketballs!</h2>
	<h4> Press spacebar for another ball.  Press delete to erase a random ball.</h4><!--
  <h5>from Chapter 11 of <em><a href="https://nostarch.com/javascriptforkids">JavaScript for Kids</a></em> text by Nick Morgan</h5>
	<center><button id = "startOver">Start Over</button></center><br />
  <br />
	<center><h2>It's Raining Basketballs!!!</h2>
		<h4> Press spacebar for another ball.  Press delete to erase a random ball.</h4>-->
	</center>
	</body>
	</html>
