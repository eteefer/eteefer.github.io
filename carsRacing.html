<!DOCTYPE html>
<html>
<head>
    <title>Cars</title>
    <link href="./jsforkidsgames.css" type="text/css" rel="stylesheet"/>    
</head>

<body>
<a href="./treasure.html"><button class="button">Find the Buried Treasure</button></a>
<a href="./carsRacing.html"><button class="button">Cars Racing</button></a>
<a href="./snakegame.html"><button class="button">Snake Game</button></a>
<a href="https://www.purposefulprogramming.org" style="float: right; margin:25px"><em>www.purposefulprogramming.org</em></a>

<br style="clear:both" />
  <div style="text-align: center">
  <h2 id="heading">Cars Racing!!!</h2>
  <h5>adapted from Chapter 12 of <em><a href="https://nostarch.com/javascriptforkids">JavaScript for Kids</a></em> text by Nick Morgan</h5>
  <br />
  </div>
  <button id = "goButton">Go</button>
  <button id = "stopButton">Stop</button>
	
<p id = "p1N" style = "position: absolute; left: 15px; top: 250px"></p>
<p id = "p2N" style = "position: absolute; left: 15px; top: 350px"></p>
<p id = "p3N" style = "position: absolute; left: 15px; top: 450px"></p>

	    
    <script src="https://code.jquery.com/jquery-2.1.0.js"></script>
    <script>
    var Car = function (x, y) {
      this.x = x;
      this.y = y;
      this.draw();
    };

    Car.prototype.draw = function () {
      var carHtml = '<img src="http://nostarch.com/images/car.png">';

      this.carElement = $(carHtml);

      this.carElement.css({
        position: "absolute",
        left: this.x,
        top: this.y
      });

      $("body").append(this.carElement);
    };

    Car.prototype.moveRight = function (distance) {
      this.x += distance;

      this.carElement.css({
        left: this.x,
        top: this.y
      });
    };

    Car.prototype.moveLeft = function (distance) {
      this.x -= distance;

      this.carElement.css({
        left: this.x,
        top: this.y
      });
    };

    Car.prototype.moveUp = function (distance) {
      this.y -= distance;

      this.carElement.css({
        left: this.x,
        top: this.y
      });
    };

    Car.prototype.moveDown = function (distance) {
      this.y += distance;

      this.carElement.css({
        left: this.x,
        top: this.y
      });
    };

	/*
	  This is where we'll add code
	                              */
	
	var enterName1 = prompt("Enter Player One's Name: ");
	if (enterName1 === null || enterName1 === "") {
	  enterName1 = "Player 1";
	  $("#p1N").text(enterName1);
	} else {
	  $("#p1N").text(enterName1);
	}
	
	var enterName2 = prompt("Enter Player Two's Name: ");
	if (enterName2 === null || enterName2 === "") {
	  enterName2 = "Player 2";
	  $("#p2N").text(enterName2);
	} else {
	  $("#p2N").text(enterName2);
	}

	
	var enterName3 = prompt("Enter Player Three's Name: ");
	if (enterName3 === null || enterName3 === "") {
	  enterName3 = "Player 3";
	  $("#p3N").text(enterName3);
	} else {
	  $("#p3N").text(enterName3);
	}

	  
    var player1 = new Car(20, 265);
    var player2 = new Car(20, 365);
    var player3 = new Car(20, 465);
    
	
	
	
	
	
	var carsDriving;  //needs to be declared outside of carsStart fxn
	                  //for stop button to work
	
    var carsStart = function () {
         carsDriving = setInterval(function () {  //do not put keyword var 
         player1.moveRight(Math.random() * 10);
         player2.moveRight(Math.random() * 10);
	     player3.moveRight(Math.random() * 10);
		 if (player1.x >= 550 || player2.x >= 550 || player3.x >= 550) {
		   clearInterval(carsDriving);
		   if (player1.x > player2.x && player1.x > player3.x) {
		     alert(enterName1 + " Wins!!!");
		   }
		   else if (player2.x > player1.x && player2.x > player3.x) {
		     alert(enterName2 + " Wins!!!");
		   } else if (player3.x > player1.x && player3.x > player2.x) {
		     alert(enterName3 + " Wins!!!");
		   } else {
		     alert("Tie!!!  Race Again!");
		   }
		   if (confirm("Would the same players like to race again?")) {
	        player1.moveLeft(player1.x-20);
			player1.x=20;
		    player2.moveLeft(player2.x-20);
			player2.x=20;
			player3.moveLeft(player3.x-20);
		    player3.x=20;
		   
	       }
		 }
       }, 30);
	   
	};
	
	$("#goButton").click(carsStart);
	
	$("#stopButton").click(function () {
	                        clearInterval(carsDriving)
							});
    </script>
</body>
</html>
