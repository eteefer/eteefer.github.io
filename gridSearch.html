<!DOCTYPE html>
<html>
<head>
  <title>Grid Search</title>
</head>
<body>
<div>
  
<a href="./treasure.html"><button class="button">Find the Buried Treasure</button></a>
<a href="./teslasRacing.html"><button class="button">Teslas Racing</button></a>
<a href="./boxInvaders.html"><button class="button">Box Invaders</button></a>
<a href="./rainingBasketballs"><button class="button">Raining Basketballs</button></a>
<a href="https://www.purposefulprogramming.org" style="float: right; margin:25px"><em>www.purposefulprogramming.org</em></a>
	
<br style="clear:both" />
  
</div>
  
<div style="text-align: center">
  <h2 id="heading">The Computer is Searching For You!!!</h2>
  <p>See which implementation finds you first.</p>
  <p>Select a location on the grid.</p>
  <button id="playerxy">Select Coordinates</button>
  <br />
</div>
  
<div style="float:left; width:50%; ">
  <p class = "description">Computer does not keep track of its guesses.</p>
  <canvas id="gridDumb" width = "320" height = "320"></canvas>
</div>
  
<div style="float:left; width:50%; ">
  <p class = "description">Computer keeps track of its guesses.</p>
  <canvas id="gridSmart" width = "320" height = "320"></canvas>
</div>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous">
</script>
	
<script>
/*

                 DRAW GRID1
				 
*/

var grid1  = document.getElementById("gridDumb");
var side1 = grid1.width;
var sideInt1 = side1/10;
var ctx1 = grid1.getContext("2d");
ctx1.strokeRect(0,0,side1,side1);
for (var a = sideInt1; a<side1; a = a+sideInt1) {  
   ctx1.beginPath();
   ctx1.moveTo(a,0);
   ctx1.lineTo(a, side1);
   ctx1.moveTo(0, a);
   ctx1.lineTo(side1, a);
   ctx1.stroke();
}
			      
/*

                 DRAW GRID2
				 
*/

var grid2  = document.getElementById("gridSmart");
var side2 = grid2.width;
var sideInt2 = side2/10;
var ctx2 = grid2.getContext("2d");
ctx2.strokeRect(0,0,side2,side2);
for (var b = sideInt2; b<side2; b = b+sideInt2) {  
   ctx2.beginPath();
   ctx2.moveTo(b,0);
   ctx2.lineTo(b, side2);
   ctx2.moveTo(0, b);
   ctx2.lineTo(side2, b);
   ctx2.stroke();
}

var playerX;
var playerY;
var playerLocation = []; 
	
$("#playerxy").click(function () {
	var playerX = prompt("Pick an x-coordinate from 1-10");  //I’m hiding at x-coordinate btwn 1 - 10
        var playerY = prompt("Pick a y-coordinate from 1-10");  //I’m hiding at a y-coordinate btwn 1 - 10
        var playerLocation = [playerX, playerY];
	console.log(playerLocation);
});
	
	
	/* 

    THIS CHUNK OF CODE SETS UP A LARGE ARRAY 
    CONTAINING ALL THE COORDINATES ON THE GRID 
    FOR THE COMPUTER TO CHOOSE FROM 

*/

var largeArray = []; //set to empty array to be filled
var tempArray = [];  //set to empty array to be filled
var largeArrayIndexer = 0;  //need this initialized at 0 outside of loops

for (var h=0;h<100;h++) {  //filling largeArray with 100 elements, each element containing an empty array
  largeArray[h] = [];
}

for (var i=1;i<11;i++) {  //we will use this for the x coordinates on grid, remember grid uses values 1-10
  for (var j=1;j<11;j++) { //will run through all y values for a particular x value on the grid before bumping up to the next x value
     tempArray = [i,j];  //contains a valid coordinate on the grid
     largeArray[largeArrayIndexer] = tempArray;  //insert an a coordinate as a small array as an element into largeArray
     largeArrayIndexer++;  //this will increment 100 times, but we won't use the very last value
  }
}



/* 

   THESE INITIALIZATIONS NEED TO HAPPEN OUTSIDE OF THE MAIN GAME LOOP 
   
*/

computerGuess = [];
var guesses = 0; //initialize guesses at 0



/* 

   THE MAIN GAME LOOP STARTS HERE AND RUNS UNTIL THE COMPUTER GUESSES BOTH COORDINATES CORRECTLY 
   
*/

ctx2.fillStyle = "Blue";

var xStart = 0;
var yStart = 0;

var gameLoop = function () {

  randomIndex = Math.floor(Math.random() * largeArray.length)
  computerGuess = largeArray[randomIndex];
  
  guesses++;
  
  if (playerLocation[0] != computerGuess[0] || playerLocation[1] != computerGuess[1]) {
  
    console.log("Number of guesses: " + guesses);
    console.log("The computer guesses: " + computerGuess[0] + ", " + computerGuess[1] + ".\n\n");
    delete largeArray[randomIndex];  //this large array element will now be set to undefined, able to be spliced
	largeArray.splice(randomIndex,1);  //very similar to .slice() for strings, but .splice() is for arrays
	xStart = (computerGuess[0]-1)*sideInt2;
	yStart = (computerGuess[1]-1)*sideInt2;
	ctx2.fillRect(xStart,yStart,sideInt2,sideInt2);
	
	
  }  else {
    console.log("Number of guesses: " + guesses);
    console.log("The computer guesses: " + computerGuess[0] + ", " + computerGuess[1] + ".\n\n");
	
	ctx2.fillStyle = "Red";
	xStart = (computerGuess[0]-1)*sideInt2;
	yStart = (computerGuess[1]-1)*sideInt2;
	ctx2.fillRect(xStart,yStart,sideInt2,sideInt2);
  
    clearInterval(intervalId);  //The computer guessed both coordinates correctly, time to leave the main game loop!
	
	
	var found = function () {
	
	alert("\nThe computer found you at location: " + computerGuess[0] + ", " + computerGuess[1] + "!!!\n\nThe computer took " + 
	guesses + " guesses to find you!!!!");
   
	
	}

    setTimeout(found, 1000);	//prevents alert from popping up too early

	
  }
  
   //the if below is extra code to help protect against an infinite loop, left here to show you
  if (guesses >= 200) {  //have to break at a value greater than 100 to see the loop isn't stopping correctly
                        
        clearInterval(intervalId);           
	
  }
  
}  //Game loop ends here


/* 

   FINAL CODE TO RUN WHEN COMPUTER FINDS THE PLAYER 
   
*/

var intervalId = setInterval(gameLoop, 500);

});
	</script>
</body>
</html>
